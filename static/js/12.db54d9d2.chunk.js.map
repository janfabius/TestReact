{"version":3,"sources":["components/Page.js","components/Filter/DateRange.js","pages/BasePage.js","components/RowNoData.js","utils/formatDate.js","components/Filter/Customer.js","components/Filter/Product.js","pages/CustomerPurchaseDetailPage.js"],"names":["bem","bn","create","Page","_ref","title","breadcrumbs","Tag","tag","className","children","restProps","Object","C_Users_Direcas_Documents_REACT_direcas_team_panel_direcas_cloud_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","classes","b","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","assign","e","_Typography__WEBPACK_IMPORTED_MODULE_6__","type","reactstrap__WEBPACK_IMPORTED_MODULE_4__","reactstrap__WEBPACK_IMPORTED_MODULE_5__","length","map","_ref2","index","name","active","key","defaultProps","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","reactstrap__WEBPACK_IMPORTED_MODULE_1__","reactstrap__WEBPACK_IMPORTED_MODULE_2__","reactstrap__WEBPACK_IMPORTED_MODULE_3__","DateRange","props","md","for","id","placeholder","defaultValue","fromStartDate","onChange","event","target","value","toStartDate","BasePage","isMobile","document","querySelector","classList","toggle","React","Component","RowNoData","colSpan","colspan","formatDate","date","d","Date","month","getMonth","day","getDate","year","getFullYear","join","Customer","_useState","useState","_useState2","C_Users_Direcas_Documents_REACT_direcas_team_panel_direcas_cloud_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","groupId","setGroupId","react_select_async__WEBPACK_IMPORTED_MODULE_6__","isClearable","cacheOptions","loadOptions","inputValue","url","concat","api","get","then","response","data","group","label","attributes","description","catch","err","console","log","defaultOptions","handleChangeGroup","customer","business_name","Product","_useState3","_useState4","departmentId","setDepartmentId","code","handleChangeDepartment","CustomerPurchaseDetailPage","state","filters","customer_group_id","customer_id","product_group_id","product_department_id","product_id","from","to","searchClicked","handleSubmit","_this","setState","onLoadStats","handleFilterChange","handlePdfClick","queryString","createQueryString","fetch","responseType","fileName","window","URL","createObjectURL","Blob","link","href","setAttribute","body","appendChild","click","error","notificationSystem","addNotification","react__WEBPACK_IMPORTED_MODULE_6___default","react_icons_md__WEBPACK_IMPORTED_MODULE_25__","message","level","_this2","this","rows","_components_RowNoData__WEBPACK_IMPORTED_MODULE_26__","sumValue","sumValuePrevYear","loading","reactstrap__WEBPACK_IMPORTED_MODULE_8__","color","stats","row","parseFloat","spent_amount","spent_amount_previous_year","customers","products","react_number_format__WEBPACK_IMPORTED_MODULE_27__","displayType","thousandSeparator","decimalSeparator","decimalScale","fixedDecimalScale","renderText","components_Page__WEBPACK_IMPORTED_MODULE_5__","reactstrap__WEBPACK_IMPORTED_MODULE_9__","reactstrap__WEBPACK_IMPORTED_MODULE_10__","reactstrap__WEBPACK_IMPORTED_MODULE_11__","reactstrap__WEBPACK_IMPORTED_MODULE_12__","reactstrap__WEBPACK_IMPORTED_MODULE_13__","reactstrap__WEBPACK_IMPORTED_MODULE_14__","onSubmit","_components_Filter_DateRange__WEBPACK_IMPORTED_MODULE_18__","bind","_components_Filter_Customer__WEBPACK_IMPORTED_MODULE_19__","_components_Filter_Product__WEBPACK_IMPORTED_MODULE_20__","reactstrap__WEBPACK_IMPORTED_MODULE_15__","disabled","onClick","icon","pdfAvaiable","reactstrap__WEBPACK_IMPORTED_MODULE_16__","responsive","react_notification_system__WEBPACK_IMPORTED_MODULE_23___default","dismissible","ref","style","NOTIFICATION_SYSTEM_STYLE","connect","statistics","purchaseDetailStatistics","dispatch","page","perPage","include","order","actions"],"mappings":"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","file":"static/js/12.db54d9d2.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'utils/propTypes';\n\nimport bn from 'utils/bemnames';\n\nimport { Breadcrumb, BreadcrumbItem } from 'reactstrap';\n\nimport Typography from './Typography';\n\nconst bem = bn.create('page');\n\nconst Page = ({\n  title,\n  breadcrumbs,\n  tag: Tag,\n  className,\n  children,\n  ...restProps\n}) => {\n  const classes = bem.b('px-3', className);\n\n  return (\n    <Tag className={classes} {...restProps}>\n      <div className={bem.e('header')}>\n        {title && typeof title === 'string' ? (\n          <Typography type=\"h1\" className={bem.e('title')}>\n            {title}\n          </Typography>\n        ) : (\n            title\n          )}\n        {breadcrumbs && (\n          <Breadcrumb className={bem.e('breadcrumb')}>\n            <BreadcrumbItem>Home</BreadcrumbItem>\n            {breadcrumbs.length &&\n              breadcrumbs.map(({ name, active }, index) => (\n                <BreadcrumbItem key={index} active={active}>\n                  {name}\n                </BreadcrumbItem>\n              ))}\n          </Breadcrumb>\n        )}\n      </div>\n      {children}\n    </Tag>\n  );\n};\n\nPage.propTypes = {\n  tag: PropTypes.component,\n  title: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n  className: PropTypes.string,\n  children: PropTypes.node,\n  breadcrumbs: PropTypes.arrayOf(\n    PropTypes.shape({\n      name: PropTypes.string,\n      active: PropTypes.bool,\n    })\n  ),\n};\n\nPage.defaultProps = {\n  tag: 'div',\n  title: '',\n};\n\nexport default Page;\n","import React from 'react';\n\nimport { Col, Row, FormGroup, Label, Input } from 'reactstrap';\n\nconst DateRange = (props) => {\n    return (\n        <Row>\n            <Col md={6}>\n                <FormGroup>\n                    <Label for=\"from\">Da</Label>\n                    <Input\n                        type=\"date\"\n                        name=\"from\"\n                        id=\"from\"\n                        placeholder=\"Data inizio\"\n                        defaultValue={props.fromStartDate}\n                        onChange={(event) => props.onChange(event.target.value, 'from')}\n                    />\n                </FormGroup>\n            </Col>\n            <Col md={6}>\n                <FormGroup>\n                    <Label for=\"exampleDate\">A</Label>\n                    <Input\n                        type=\"date\"\n                        name=\"date\"\n                        id=\"to\"\n                        placeholder=\"Data Fine\"\n                        defaultValue={props.toStartDate}\n                        onChange={(event) => props.onChange(event.target.value, 'to')}\n                    />\n                </FormGroup>\n            </Col>\n        </Row>\n    );\n};\n\nexport default DateRange;\n","import React from 'react';\n\nimport { isMobile } from \"react-device-detect\";\n\nclass BasePage extends React.Component {\n\tcomponentDidMount() {\n\t\tif (isMobile) {\n\t\t\tdocument.querySelector('.cr-sidebar').classList.toggle('cr-sidebar--open');\n\t\t}\n\t}\n}\n\nexport default BasePage","import React from 'react';\n\nconst RowNoData = (props) => {\n    return (\n        <tr>\n            <td colSpan={props.colspan}>{props.children || \"Nessun dato presente\"}</td>\n        </tr>\n    );\n};\n\nexport default RowNoData;\n","export const formatDate = (date) => {\n  var d = new Date(date),\n      month = '' + (d.getMonth() + 1),\n      day = '' + d.getDate(),\n      year = d.getFullYear()\n\n  if (month.length < 2)\n      month = '0' + month;\n  if (day.length < 2)\n      day = '0' + day;\n\n  return [year, month, day].join('-');\n}\n\nexport default formatDate\n","import React, { useState } from 'react';\n\nimport { Col, Row, FormGroup, Label } from 'reactstrap';\nimport AsyncSelect from 'react-select/async';\n\nimport api from '../../api'\n\n\nconst Customer = (props) => {\n    const [groupId, setGroupId] = useState(\n        null\n    );\n\n    const promiseCustomerGroupOptions = inputValue => {\n        const url = `customer-groups${inputValue ? '?filter[text]=' + inputValue : ''}`\n        return api.get(url)\n            .then(response => {\n                const options = response.data.data.map(group => ({ value: group.id, label: group.attributes.description }));\n                return options;\n            })\n            .catch(err => {\n                console.log('some error', err);\n            });\n    };\n\n    const promiseCustomerOptions = inputValue => {\n        const url = `customers${inputValue ? '?filter[text]=' + inputValue : ''}${groupId ? '&filter[group_id]=' + groupId : ''}`\n        return api.get(url)\n            .then(response => {\n                const options = response.data.data.map(customer => ({ value: customer.id, label: customer.attributes.business_name }));\n                return options;\n            })\n            .catch(err => {\n                console.log('some error', err);\n            });\n    };\n\n    const handleChangeGroup = (event) => {\n        const value = event ? event.value : null\n        props.onChange(value, 'customer_group_id')\n        setGroupId(value)\n    }\n    return (\n        <Row>\n            <Col md={6}>\n                <FormGroup>\n                    <Label for=\"exampleUrl\">Gruppo Cliente</Label>\n                    <AsyncSelect\n                        isClearable\n                        cacheOptions\n                        loadOptions={promiseCustomerGroupOptions}\n                        defaultOptions\n                        onChange={(event) => handleChangeGroup(event)}\n                    />\n                </FormGroup>\n            </Col>\n            <Col md={6}>\n                <FormGroup>\n                    <Label for=\"exampleUrl\">Cliente</Label>\n                    <AsyncSelect\n                        isClearable\n                        loadOptions={promiseCustomerOptions}\n                        defaultOptions\n                        onChange={(event) => props.onChange(event.value, 'customer_id')}\n                    />\n                </FormGroup>\n            </Col>\n        </Row>\n    );\n};\n\nexport default Customer;\n","import React, { useState } from 'react';\n\nimport { Col, Row, FormGroup, Label } from 'reactstrap';\nimport AsyncSelect from 'react-select/async';\n\nimport api from '../../api'\n\n\nconst Product = (props) => {\n    const [groupId, setGroupId] = useState(\n        null\n    );\n\n    const [departmentId, setDepartmentId] = useState(\n        null\n    );\n\n    const promiseProductGroupOptions = inputValue => {\n        const url = `product-groups${inputValue ? '?filter[text]=' + inputValue : ''}`\n        return api.get(url)\n            .then(response => {\n                const options = response.data.data.map(group => ({ value: group.id, label: group.attributes.description }));\n                return options;\n            })\n            .catch(err => {\n                console.log('some error', err);\n            });\n    };\n\n    const promiseProductDepartmentOptions = inputValue => {\n        const url = `product-departments${inputValue ? '?filter[text]=' + inputValue : ''}${groupId ? '&filter[group_id]=' + groupId : ''}`\n        return api.get(url)\n            .then(response => {\n                const options = response.data.data.map(customer => ({ value: customer.attributes.code, label: customer.attributes.description }));\n                return options;\n            })\n            .catch(err => {\n                console.log('some error', err);\n            });\n    };\n\n    const promiseProductOptions = inputValue => {\n        if (inputValue.length > 3) {\n            const url = `products${inputValue ? '?filter[text]=' + inputValue : ''}${groupId ? '&filter[group_id]=' + groupId : ''}${departmentId ? '&filter[department_id]=' + departmentId : ''}`\n            return api.get(url)\n                .then(response => {\n                    const options = response.data.data.map(customer => ({ value: customer.id, label: customer.attributes.description }));\n                    return options;\n                })\n                .catch(err => {\n                    console.log('some error', err);\n                });\n        }\n    };\n\n    const handleChangeGroup = (event) => {\n        const value = event ? event.value : null\n        props.onChange(value, 'product_group_id')\n        setGroupId(value)\n    }\n\n    const handleChangeDepartment = (event) => {\n        const value = event ? event.value : null\n        props.onChange(value, 'product_department_id')\n        setDepartmentId(value)\n    }\n    return (\n        <Row>\n            <Col md={4}>\n                <FormGroup>\n                    <Label for=\"exampleUrl\">Gruppo Prodotto</Label>\n                    <AsyncSelect\n                        isClearable\n                        cacheOptions\n                        loadOptions={promiseProductGroupOptions}\n                        defaultOptions\n                        onChange={(event) => handleChangeGroup(event)}\n                    />\n                </FormGroup>\n            </Col>\n            <Col md={4}>\n                <FormGroup>\n                    <Label for=\"exampleUrl\">Reparto prodotto</Label>\n                    <AsyncSelect\n                        isClearable\n                        loadOptions={promiseProductDepartmentOptions}\n                        defaultOptions\n                        onChange={(event) => handleChangeDepartment(event)}\n                    />\n                </FormGroup>\n            </Col>\n            <Col md={4}>\n                <FormGroup>\n                    <Label for=\"exampleUrl\">Prodotto</Label>\n                    <AsyncSelect\n                        isClearable\n                        loadOptions={promiseProductOptions}\n                        defaultOptions\n                        onChange={(event) => props.onChange(event.value, 'product_id')}\n                    />\n                </FormGroup>\n            </Col>\n        </Row>\n    );\n};\n\nexport default Product;\n","import Page from 'components/Page';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Card, CardBody, CardHeader, Col, Row, Table, Form, Button, Spinner } from 'reactstrap';\n\nimport * as actions from '../store/actions/index';\nimport DateRange from '../components/Filter/DateRange'\nimport CustomerFilter from '../components/Filter/Customer'\nimport ProductFilter from '../components/Filter/Product'\nimport api from '../api'\nimport { createQueryString } from '../utils/queryString';\nimport NotificationSystem from 'react-notification-system';\nimport { NOTIFICATION_SYSTEM_STYLE } from 'utils/constants';\nimport {\n    MdError\n} from 'react-icons/md';\nimport RowNoData from '../components/RowNoData';\n\nimport NumberFormat from 'react-number-format';\nimport formatDate from '../utils/formatDate'\n\n\nimport BasePage from './BasePage';\n\n\nlet date = new Date()\n\nclass CustomerPurchaseDetailPage extends BasePage {\n\n    state = {\n        filters: {\n            customer_group_id: null,\n            customer_id: null,\n            product_group_id: null,\n            product_department_id: null,\n            product_id: null,\n            from: formatDate(new Date(date.getFullYear(), date.getMonth(), 1)),\n            to: formatDate(new Date()),\n        },\n        searchClicked: false\n    }\n\n    handleSubmit = () => {\n        const { searchClicked } = this.state\n        this.setState({\n            searchClicked: !searchClicked\n        })\n        this.props.onLoadStats(null, null, this.state.filters, ['customer', 'product'], null)\n    }\n\n    handleFilterChange = (value, name) => {\n        const { filters } = this.state\n        filters[name] = value\n        this.setState({\n            filters\n        })\n    }\n\n    handlePdfClick = () => {\n        const queryString = createQueryString(null, null, this.state.filters, ['customer', 'product'], null);\n        api.get(`purchase-detail-products/pdf${queryString}`)\n            .then(response => {\n                fetch(response.data, {\n                    responseType: 'blob'\n                }).then(response => {\n                    const fileName = `acquisti_clienti_${this.state.filters.from}_${this.state.filters.to}.pdf`\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', fileName);\n                    document.body.appendChild(link);\n                    link.click();\n                })\n            })\n            .catch(error => {\n                if (!this.notificationSystem) {\n                    return;\n                }\n\n                this.notificationSystem.addNotification({\n                    title: <MdError />,\n                    message: 'Errore nello scaricamento',\n                    level: 'error',\n                });\n            });\n    }\n\n    render() {\n        let rows = <RowNoData colspan={5}/>\n        let sumValue = 0\n        let sumValuePrevYear = 0\n        if (this.props.loading && this.state.searchClicked) {\n            rows = <RowNoData colspan={5} ><Spinner color=\"primary\"/></RowNoData>\n        }\n        if (this.props.loading === false && this.props.error === false && this.props.stats !== null) {\n            rows = this.props.stats.map((row, index) => {\n                sumValue += parseFloat(row.attributes.spent_amount)\n                sumValuePrevYear += parseFloat(row.attributes.spent_amount_previous_year)\n                return <tr key={index}>\n                    <td className=\"text-left\">{this.props.customers[row.attributes.customer_id].business_name}</td>\n                    <td className=\"text-left\">{this.props.products[row.attributes.product_id].description}</td>\n                    <td className=\"text-left\">{row.attributes.day}</td>\n                    <td className=\"text-right\"><NumberFormat value={row.attributes.spent_amount} displayType={'text'} thousandSeparator={'.'} decimalSeparator={','} decimalScale={2} fixedDecimalScale={true} renderText={value => <div>{value}</div>} /></td>\n                    <td className=\"text-right\"><NumberFormat value={row.attributes.spent_amount_previous_year} displayType={'text'} thousandSeparator={'.'} decimalSeparator={','} decimalScale={2} fixedDecimalScale={true} renderText={value => <div>{value}</div>} /></td>\n                </tr>\n            })\n        }\n        return (\n            <Page title=\"Punti clienti\" breadcrumbs={[{ name: 'punti clienti', active: true }]}>\n                <Row>\n                    <Col>\n                        <Card className=\"mb-3\">\n                            <CardHeader>\n                                Filtri\n                            </CardHeader>\n                            <CardBody>\n                                <Form onSubmit={this.handleSubmit}>\n                                    <DateRange onChange={this.handleFilterChange.bind(this)}  fromStartDate={this.state.filters.from} toStartDate={this.state.filters.to}/>\n                                    <CustomerFilter onChange={this.handleFilterChange.bind(this)} />\n                                    <ProductFilter onChange={this.handleFilterChange.bind(this)} />\n                                    <Row>\n                                        <Col>\n                                            <Button\n                                                color=\"primary\"\n                                                disabled={this.props.loading && this.state.searchClicked}\n                                                onClick={this.handleSubmit}>\n                                                Cerca\n                                            </Button>\n                                        </Col>\n                                    </Row>\n                                </Form>\n                            </CardBody>\n                        </Card>\n                        <Card className=\"mb-3\">\n                            <CardHeader>\n                                <Button\n                                    className=\"float-right\"\n                                    color=\"secondary\"\n                                    icon=\"pdf\"\n                                    onClick={this.handlePdfClick}\n                                    disabled={!this.props.pdfAvaiable}>\n                                    PDF\n                                </Button>\n                            </CardHeader>\n                            <CardBody>\n                                <Table responsive>\n                                    <thead>\n                                        <tr>\n                                            <th className=\"text-left\">Cliente</th>\n                                            <th className=\"text-left\">Articolo</th>\n                                            <th className=\"text-right\">Data acquisto</th>\n                                            <th className=\"text-right\">Valore speso €</th>\n                                            <th className=\"text-right\">Valore speso anno precedente €</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {rows}\n                                    </tbody>\n                                    <tfoot>\n                                        <tr>\n                                            <th></th>\n                                            <th></th>\n                                            <th className=\"text-left\">TOTALE:</th>\n                                            <td className=\"text-right\"><NumberFormat value={sumValue} displayType={'text'} thousandSeparator={'.'} decimalSeparator={','} decimalScale={2} fixedDecimalScale={true} renderText={value => <div>{value}</div>} /></td>\n                                            <td className=\"text-right\"><NumberFormat value={sumValuePrevYear} displayType={'text'} thousandSeparator={'.'} decimalSeparator={','} decimalScale={2} fixedDecimalScale={true} renderText={value => <div>{value}</div>} /></td>\n                                        </tr>\n                                    </tfoot>\n                                </Table>\n                            </CardBody>\n                        </Card>\n                    </Col>\n                </Row>\n                <NotificationSystem\n                    dismissible={false}\n                    ref={notificationSystem =>\n                        (this.notificationSystem = notificationSystem)\n                    }\n                    style={NOTIFICATION_SYSTEM_STYLE}\n                />\n            </Page>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        stats: state.statistics.purchaseDetailStatistics,\n        customers: state.statistics.customers,\n        products: state.statistics.products,\n        loading: state.statistics.loading,\n        error: state.statistics.error,\n        pdfAvaiable: state.statistics.pdfAvaiable\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onLoadStats: (page, perPage, filters, include, order) => dispatch(actions.loadPurchaseDetailStatCustomers(page, perPage, filters, include, order)),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CustomerPurchaseDetailPage);\n"],"sourceRoot":""}