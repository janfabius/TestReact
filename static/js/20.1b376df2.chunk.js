(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{205:function(e,t,a){"use strict";var r=a(11),l=a(1),n=a.n(l),i=(a(27),a(36)),c=a(237),o=a(238),s=a(58),m=i.a.create("page"),u=function(e){var t=e.title,a=e.breadcrumbs,l=e.tag,i=e.className,u=e.children,d=Object(r.a)(e,["title","breadcrumbs","tag","className","children"]),p=m.b("px-3",i);return n.a.createElement(l,Object.assign({className:p},d),n.a.createElement("div",{className:m.e("header")},t&&"string"===typeof t?n.a.createElement(s.a,{type:"h1",className:m.e("title")},t):t,a&&n.a.createElement(c.a,{className:m.e("breadcrumb")},n.a.createElement(o.a,null,"Home"),a.length&&a.map(function(e,t){var a=e.name,r=e.active;return n.a.createElement(o.a,{key:t,active:r},a)}))),u)};u.defaultProps={tag:"div",title:""},t.a=u},207:function(e,t,a){"use strict";var r=a(1),l=a.n(r),n=a(197),i=a(198),c=a(181),o=a(182),s=a(183);t.a=function(e){return l.a.createElement(n.a,null,l.a.createElement(i.a,{md:6},l.a.createElement(c.a,null,l.a.createElement(o.a,{for:"from"},"Da"),l.a.createElement(s.a,{type:"date",name:"from",id:"from",placeholder:"Data inizio",defaultValue:e.fromStartDate,onChange:function(t){return e.onChange(t.target.value,"from")}}))),l.a.createElement(i.a,{md:6},l.a.createElement(c.a,null,l.a.createElement(o.a,{for:"exampleDate"},"A"),l.a.createElement(s.a,{type:"date",name:"date",id:"to",placeholder:"Data Fine",defaultValue:e.toStartDate,onChange:function(t){return e.onChange(t.target.value,"to")}}))))}},208:function(e,t,a){"use strict";var r=a(12),l=a(13),n=a(15),i=a(14),c=a(16),o=a(1),s=a.n(o),m=a(212),u=function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){m.isMobile&&document.querySelector(".cr-sidebar").classList.toggle("cr-sidebar--open")}}]),t}(s.a.Component);t.a=u},210:function(e,t,a){"use strict";t.a=function(e){var t=new Date(e),a=""+(t.getMonth()+1),r=""+t.getDate(),l=t.getFullYear();return a.length<2&&(a="0"+a),r.length<2&&(r="0"+r),[l,a,r].join("-")}},217:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"primary";return"undefined"===typeof window?null:window.getComputedStyle(document.documentElement).getPropertyValue("--".concat(e))}},435:function(e,t,a){"use strict";a.r(t);var r=a(12),l=a(13),n=a(15),i=a(14),c=a(16),o=a(31),s=a(1),m=a.n(s),u=a(0),d=a.n(u),p=a(19),b=a(30),h=a(205),f=a(172),E=a(173),y=a(191),x=a(177),g=a(197),S=a(198),_=a(427),v=a(192),N=a(181),j=a(182),O=a(183),T=a(178),C=a(224),D=a(34),k=a.n(D),w=a(42),P=a(35),A=a(210),F=a(207),z=a(217),L=a(218),V=a(208),q=new Date,B=function(e){function t(){var e,a;Object(r.a)(this,t);for(var l=arguments.length,c=new Array(l),o=0;o<l;o++)c[o]=arguments[o];return(a=Object(n.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={filters:{from:Object(A.a)(new Date(q.getFullYear(),q.getMonth(),1)),to:Object(A.a)(new Date)},groupByAffiliate:!0,searchClicked:!1},a.handleSubmit=function(){var e=a.state.searchClicked;a.setState({searchClicked:!e}),a.props.onLoadStats(null,null,a.state.filters,["affiliate"],null)},a.handleFilterChange=function(e,t){var r=a.state.filters;r[t]=e,a.setState({filters:r})},a.handleCheckboxChange=function(){var e=a.state.groupByAffiliate;a.setState({groupByAffiliate:!e})},a.handleReset=function(){var e=a.state.filters;Object.keys(e).forEach(function(t){e[t]=null}),a.setState({filters:e}),a.changeGroupBy("")},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.groupByAffiliate,a=e.searchClicked,r=this.props,l=r.stats,n=r.error,i=r.loading,c=r.affiliates,s=null;if(i&&a&&(s=m.a.createElement(f.a,null,m.a.createElement(E.a,null,m.a.createElement(y.a,{color:"primary"})))),!1===i&&!1===n&&null!==l){var u=Object.keys(c),d=l;if(!1===t){d={},u=u.slice(u.length-1,u.length),Object.entries(l).forEach(function(e,t){d.hasOwnProperty(l[t].attributes.day)?(d[l[t].attributes.day].attributes.quantity+=l[t].attributes.quantity,d[l[t].attributes.day].attributes.mean=(d[l[t].attributes.day].attributes.mean+l[t].attributes.mean)/2,d[l[t].attributes.day].attributes.amount+=l[t].attributes.amount,d[l[t].attributes.day].attributes.promo_amount+=l[t].attributes.promo_amount,d[l[t].attributes.day].attributes.promo_perc=(d[l[t].attributes.day].attributes.promo_perc+l[t].attributes.promo_amount)/2,d[l[t].attributes.day].attributes.promo_amount_leaflet+=l[t].attributes.promo_amount_leaflet,d[l[t].attributes.day].attributes.promo_perc_leaflet=(d[l[t].attributes.day].attributes.promo_perc_leaflet+l[t].attributes.promo_perc_leaflet)/2,d[l[t].attributes.day].attributes.promo_amount_internal+=l[t].attributes.promo_amount_internal,d[l[t].attributes.day].attributes.promo_perc_internal=(d[l[t].attributes.day].attributes.promo_perc_internal+l[t].attributes.promo_perc_internal)/2,d[l[t].attributes.day].attributes.promo_amount_special=l[t].attributes.promo_amount_special,d[l[t].attributes.day].attributes.promo_perc_special=(d[l[t].attributes.day].attributes.promo_perc_special+l[t].attributes.promo_perc_special)/2):d[l[t].attributes.day]=l[t]});var p=Object.keys(d).map(function(e){return d[e]});d=p}s=u.map(function(e){var a=c[e],r=0,l=0,n=0,i=0,s=0,u=0,p=[],b=[],h=[],y=[],v=[],N={labels:[],datasets:[{label:"Promozioni",borderColor:Object(z.a)("secondary"),backgroundColor:Object(z.a)("secondary"),data:[]},{label:"Totali",borderColor:Object(z.a)("primary"),backgroundColor:Object(z.a)("primary"),data:[]}]},j={labels:[],datasets:[{label:"Promozioni",borderColor:Object(z.a)("secondary"),backgroundColor:Object(z.a)("secondary"),data:[],fill:!1,borderWidth:1},{label:"Volantino",borderColor:Object(z.a)("primary"),backgroundColor:Object(z.a)("primary"),data:[],fill:!1,borderWidth:1},{label:"Interne",borderColor:Object(z.a)("success"),backgroundColor:Object(z.a)("success"),data:[],fill:!1,borderWidth:1},{label:"Speciali",borderColor:Object(z.a)("info"),backgroundColor:Object(z.a)("info"),data:[],fill:!1,borderWidth:1}]},O=null;return!0===t&&(O=m.a.createElement(x.a,{className:"bg-primary  text-white"},m.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},m.a.createElement("span",null,a.name)))),m.a.createElement(f.a,{className:"mb-3",key:e},O,m.a.createElement(E.a,null,m.a.createElement(g.a,null,m.a.createElement(S.a,{xl:6,lg:6,md:6},m.a.createElement(C.Line,{data:N,options:Object(o.a)({},w.c,{title:{display:!0,text:"Incidenza promozioni"}})})),m.a.createElement(S.a,{xl:6,lg:6,md:6},m.a.createElement(C.Line,{data:j,options:Object(o.a)({},w.c,{title:{display:!0,text:"Distribuzione promozioni"}})}))),m.a.createElement(_.a,{responsive:!0},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",{className:"text-right"},"Data"),m.a.createElement("th",{className:"text-right"},"Nr. Scontrini"),m.a.createElement("th",{className:"text-right"},"Medio \u20ac"),m.a.createElement("th",{className:"text-right"},"Totale \u20ac"),m.a.createElement("th",{className:"text-right"},"Promo \u20ac"),m.a.createElement("th",{className:"text-right"},"% Promo"),m.a.createElement("th",{className:"text-right"},"Promo Vol \xbd"),m.a.createElement("th",{className:"text-right"},"% Promo Vol"),m.a.createElement("th",{className:"text-right"},"Promo Int"),m.a.createElement("th",{className:"text-right"},"% Promo Int"),m.a.createElement("th",{className:"text-right"},"Promo Spec \u20ac"),m.a.createElement("th",{className:"text-right"},"% Promo Spec"))),m.a.createElement("tbody",null,d.map(function(a,c){return a.relationships.affiliate.data.id!==e&&t?null:(r+=a.attributes.quantity,l+=a.attributes.amount,p.push(a.attributes.mean),n+=a.attributes.promo_amount,b.push(a.attributes.promo_perc),i+=a.attributes.promo_amount_leaflet,h.push(a.attributes.promo_perc_leaflet),s+=a.attributes.promo_amount_internal,y.push(a.attributes.promo_perc_internal),u+=a.attributes.promo_amount_special,v.push(a.attributes.promo_perc_special),N.labels.push(a.attributes.day),N.datasets[1].data.push(a.attributes.amount),N.datasets[0].data.push(a.attributes.promo_amount),j.labels.push(a.attributes.day),j.datasets[1].data.push(a.attributes.promo_amount_leaflet),j.datasets[2].data.push(a.attributes.promo_amount_internal),j.datasets[3].data.push(a.attributes.promo_amount_special),j.datasets[0].data.push(a.attributes.promo_amount),m.a.createElement("tr",{key:c},m.a.createElement("td",{className:"text-right"},a.attributes.day),m.a.createElement("td",{className:"text-right"},a.attributes.quantity),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:a.attributes.mean,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:a.attributes.amount,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:a.attributes.promo_amount,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:a.attributes.promo_perc,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:a.attributes.promo_amount_leaflet,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:a.attributes.promo_perc_leaflet,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:a.attributes.promo_amount_internal,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:a.attributes.promo_perc_internal,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:a.attributes.promo_amount_special,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:a.attributes.promo_perc_special,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}}))))})),m.a.createElement("tfoot",null,m.a.createElement("tr",null,m.a.createElement("th",null,"TOTALI:"),m.a.createElement("td",{className:"text-right"},r),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:Object(P.a)(p),displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:l,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:n,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},(Object(P.a)(b)/b.length).toFixed(2)),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:i,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},(Object(P.a)(h)/h.length).toFixed(2)),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:s,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},(Object(P.a)(y)/y.length).toFixed(2)),m.a.createElement("td",{className:"text-right"},m.a.createElement(L.a,{value:u,displayType:"text",thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,renderText:function(e){return m.a.createElement("div",null,e)}})),m.a.createElement("td",{className:"text-right"},(Object(P.a)(v)/v.length).toFixed(2)))))))})}return m.a.createElement(h.a,{title:"Totali scontrini",breadcrumbs:[{name:"totali scontrini",active:!0}]},m.a.createElement(g.a,null,m.a.createElement(S.a,null,m.a.createElement(f.a,{className:"mb-3"},m.a.createElement(x.a,null,"Filtri"),m.a.createElement(E.a,null,m.a.createElement(v.a,{onSubmit:this.handleSubmit},m.a.createElement(F.a,{onChange:this.handleFilterChange.bind(this),fromStartDate:this.state.filters.from,toStartDate:this.state.filters.to}),m.a.createElement(g.a,null,m.a.createElement(S.a,null,m.a.createElement(N.a,{check:!0},m.a.createElement(j.a,{check:!0},m.a.createElement(O.a,{type:"checkbox",checked:t,onChange:this.handleCheckboxChange.bind()})," Ragruppa per filiale")))),m.a.createElement(g.a,null,m.a.createElement(S.a,null,m.a.createElement(T.a,{color:"primary",disabled:this.props.loading&&this.state.searchClicked,onClick:this.handleSubmit},"Cerca"),"\xa0",m.a.createElement(T.a,{color:"secondary",disabled:this.props.loading&&this.state.searchClicked,onClick:this.handleReset},"Reset")))))),s)),m.a.createElement(k.a,{dismissible:!1,notifications:this.props.notifications,style:w.d}))}}]),t}(V.a);B.contextTypes={store:d.a.object},B.propTypes={notifications:d.a.array,stats:d.a.array,affiliates:d.a.object,loading:d.a.bool,error:d.a.bool,pdfAvaiable:d.a.bool};t.default=Object(p.connect)(function(e){return{stats:e.statistics.receiptTotalStatistics,affiliates:e.statistics.affiliates,loading:e.statistics.loading,error:e.statistics.error,pdfAvaiable:e.statistics.pdfAvaiable,notifications:e.notifications}},function(e){return{onLoadStats:function(t,a,r,l,n){return e(b.n(t,a,r,l,n))}}})(B)}}]);
//# sourceMappingURL=20.1b376df2.chunk.js.map